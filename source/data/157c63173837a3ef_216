From:
osiitm_2016@googlegroups.com

Date:
15-10-2016

Body:
<html>
<head>
<meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Diso-8859-=
1">
<style type=3D"text/css" style=3D"display:none"><!-- P { margin-top: 0px; m=
argin-bottom: 0px; } @font-face { font-family: 'Cambria Math'; } @font-face=
 { font-family: Calibri; } p.MsoNormal, li.MsoNormal, div.MsoNormal { margi=
n: 0cm 0cm 0.0001pt; font-size: 11pt; font-family: Calibri, sans-serif; } a=
:link, span.MsoHyperlink { color: blue; text-decoration: underline; } a:vis=
ited, span.MsoHyperlinkFollowed { color: purple; text-decoration: underline=
; } span.EmailStyle17 { font-family: Calibri, sans-serif; color: windowtext=
; } .MsoChpDefault { font-family: Calibri, sans-serif; } @page WordSection1=
 { margin: 72pt; } div.WordSection1 { }--></style>
</head>
<body dir=3D"ltr" style=3D"font-size:12pt;color:#000000;background-color:#F=
FFFFF;font-family:Calibri,Arial,Helvetica,sans-serif;">
<p>Hi Rajat,<br>
</p>
<p><br>
</p>
<p>switchuvm() doesn't seem to have a role to play here.<br>
</p>
<p>It is used if&nbsp;</p>
<p>(1)&nbsp;we are wanting to do a context switch<br>
</p>
<p>(2) there has been a change in the ss or stack pointer,<br>
</p>
<p>(3)&nbsp;pgdir changes<br>
</p>
<p><br>
</p>
<p>None of these seem to be happening here.<br>
</p>
<p><br>
</p>
<p>Perhaps, this is a reminisce of an older version of xv6,<br>
</p>
<p>where growproc created a whole new page table.<br>
</p>
<p><a href=3D"http://www.cse.iitd.ernet.in/~sbansal/os/previous_years/2011/=
xv6_html/proc_8c-source.html">http://www.cse.iitd.ernet.in/~sbansal/os/prev=
ious_years/2011/xv6_html/proc_8c-source.html</a>&#8203;<br>
</p>
<p><br>
</p>
<p>Chester<br>
</p>
<div style=3D"color: rgb(33, 33, 33);">
<hr tabindex=3D"-1" style=3D"display:inline-block; width:98%">
<div id=3D"divRplyFwdMsg" dir=3D"ltr"><font face=3D"Calibri, sans-serif" co=
lor=3D"#000000" style=3D"font-size:11pt"><b>From:</b> Rajat Rao &lt;ee14b10=
1@smail.iitm.ac.in&gt;<br>
<b>Sent:</b> Friday, October 14, 2016 11:21 PM<br>
<b>To:</b> Chester Rebeiro<br>
<b>Subject:</b> Purpose of switchuvm</font>
<div>&nbsp;</div>
</div>
<div>
<div class=3D"WordSection1">
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Times New Roman&quo=
t;,serif">Dear Sir,</span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Times New Roman&quo=
t;,serif">&nbsp;</span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Times New Roman&quo=
t;,serif">The switchuvm() function is used to populate the TSS and load cr3=
 with the pagedir of the process. This is done during a context switch. How=
ever, switchuvm() is also called in growproc.
 Why is this?</span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Times New Roman&quo=
t;,serif">As I understand, this is the sequence of steps -
</span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Times New Roman&quo=
t;,serif">1. User proc calls xv6 equivalent of malloc</span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Times New Roman&quo=
t;,serif">2. malloc calls sbrk</span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Times New Roman&quo=
t;,serif">3. sbrk calls growproc to allocate memory</span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Times New Roman&quo=
t;,serif">Since there is no context switching involved, and the pagedir rem=
ains the same, why is switchuvm() called?</span></p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Times New Roman&quo=
t;,serif">&nbsp;</span></p>
<p class=3D"MsoNormal">&nbsp;</p>
<p class=3D"MsoNormal"><span style=3D"">Best Regards,</span></p>
<p class=3D"MsoNormal"><span style=3D"">Rajat Rao </span></p>
<p class=3D"MsoNormal"><span style=3D"">Mobile: &#43;91-9789094996</span></=
p>
<p class=3D"MsoNormal"><span style=3D"">E-Mail: rajatrao96@gmail.com</span>=
</p>
<p class=3D"MsoNormal">&nbsp;</p>
<p class=3D"MsoNormal"><span style=3D"font-family:&quot;Times New Roman&quo=
t;,serif">&nbsp;</span></p>
</div>
</div>
</div>
</body>
</html>

<p></p>

-- <br />
You received this message because you are subscribed to the Google Groups &=
quot;osiitm_2016&quot; group.<br />
To unsubscribe from this group and stop receiving emails from it, send an e=
mail to <a href=3D"mailto:osiitm_2016+unsubscribe@googlegroups.com">osiitm_=
2016+unsubscribe@googlegroups.com</a>.<br />
To post to this group, send email to <a href=3D"mailto:osiitm_2016@googlegr=
oups.com">osiitm_2016@googlegroups.com</a>.<br />
To view this discussion on the web visit <a href=3D"https://groups.google.c=
om/d/msgid/osiitm_2016/1476498841702.93981%40iitm.ac.in?utm_medium=3Demail&=
utm_source=3Dfooter">https://groups.google.com/d/msgid/osiitm_2016/14764988=
41702.93981%40iitm.ac.in</a>.<br />
For more options, visit <a href=3D"https://groups.google.com/d/optout">http=
s://groups.google.com/d/optout</a>.<br />


